function validarCNPJ(t){if(t=t.replace(/[^\d]+/g,""),""==t)return toastErrorCNPJ();if(14!=t.length)return toastErrorCNPJ();if("00000000000000"==t||"11111111111111"==t||"22222222222222"==t||"33333333333333"==t||"44444444444444"==t||"55555555555555"==t||"66666666666666"==t||"77777777777777"==t||"88888888888888"==t||"99999999999999"==t)return toastErrorCNPJ();for(tamanho=t.length-2,numeros=t.substring(0,tamanho),digitos=t.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);if(resultado=soma%11<2?0:11-soma%11,resultado!=digitos.charAt(0))return toastErrorCNPJ();for(tamanho+=1,numeros=t.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);return resultado=soma%11<2?0:11-soma%11,resultado==digitos.charAt(1)||toastErrorCNPJ()}let elementValue,isValid=!0;const getDateYear=()=>{let t=new Date,a=t.getFullYear();return a},getUnmask=t=>{let a=t.replace(/[^0-9]/g,"");return a},getCurrencyConvert=t=>{let a=getUnmask(t),o=a.substring(0,a.length-2),e=a.substring(a.length-2,a.length),r=Number.parseFloat(o+"."+e);return r},getValueElement=t=>{let a=$(t).get(0).innerText;return a},toastErrorCNPJ=()=>{let t=Swal.fire({icon:"error",title:"CNPJ Inválido!"});return t},toastSuccess=t=>{let a=Swal.fire({icon:"success",title:'Arquivo JSON <span class="toastsuccess">'+t.toUpperCase()+"</span> gerado com sucesso!",showConfirmButton:!1,timer:3500});return setTimeout(()=>{window.location.reload(!0)},3500),a},toastError=t=>{let a=Swal.fire({icon:"error",title:'Os campos do formulário <span class="toasterror">'+t.toUpperCase()+"</span> devem ser preenchidos!"});return a},procedimentoSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={cnpj_ug:getUnmask(o.cnpj_ug_procedimento),id_contratacao:o.id_contratacao_procedimento,numero_processo:o.numero_processo_procedimento,ano_processo:parseInt(o.ano_processo_procedimento),numero_procedimento:parseInt(o.numero_procedimento),ano_procedimento:parseInt(o.ano_procedimento),data_publicacao:o.data_publicacao_procedimento,numero_lei:parseInt(o.numero_lei_procedimento),ano_lei:parseInt(o.ano_lei_procedimento),cod_procedimento:o.cod_procedimento,criterio_procedimento:parseInt(o.criterio_procedimento),finalidade:parseInt(o.finalidade_procedimento),sistema_pregao:o.sistema_pregao_procedimento,data_adesao:o.data_adesao_procedimento,regime_execucao:parseInt(o.regime_execucao_procedimento),objeto:o.objeto_procedimento,valor_estimado:getCurrencyConvert(o.valor_estimado_procedimento),data_sessao:o.data_sessao_procedimento,cpf_autoridade:getUnmask(o.cpf_autoridade_procedimento)};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.cnpj_ug_procedimento||""==o.id_contratacao_procedimento||""==o.numero_processo_procedimento||""==o.ano_processo_procedimento||""==o.numero_procedimento||""==o.ano_procedimento||""==o.numero_lei_procedimento||""==o.ano_lei_procedimento||""==o.cod_procedimento||""==o.finalidade_procedimento||""==o.regime_execucao_procedimento||""==o.objeto_procedimento||""==o.cpf_autoridade_procedimento?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_procedimento+"_procedimento.json"),isValid=!1),setTimeout(()=>{$("#form-procedimento")[0].reset()},1500)),console.log(n,isValid)},resultadoSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={id_contratacao:o.id_contratacao_resultado,cnpj_ug:getUnmask(o.cnpj_ug_resultado),licitacao:parseInt(o.licitacao_resultado),data:o.data_resultado,valor:getCurrencyConvert(o.valor_resultado)};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.id_contratacao_resultado||(o.cnpj_ug_resultado="")||""==o.licitacao_resultado||""==o.data_resultado?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_resultado+"_resultado.json"),isValid=!1),setTimeout(()=>{$("#form-resultado")[0].reset()},1500)),console.log(n,isValid)},ataRegistroSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={id_contratacao:o.id_contratacao_ata_registro,cnpj_ug:getUnmask(o.cnpj_ug_ata_registro),numero:o.numero_ata_registro,ano:parseInt(o.ano_ata_registro),valor:getCurrencyConvert(o.valor_ata_registro),data_inicio:o.data_inicio_ata_registro,data_fim:o.data_fim_ata_registro};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.id_contratacao_ata_registro||""==o.cnpj_ug_ata_registro||""==o.numero_ata_registro||""==o.ano_ata_registro||""==o.valor_ata_registro||""==o.data_inicio_ata_registro||""==o.data_fim_ata_registro?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_ata_registro+"_ata_registro.json"),isValid=!1),setTimeout(()=>{$("#form-ata-registro")[0].reset()},1500)),console.log(n,isValid)},cadOrgaoSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={id_contratacao:o.id_contratacao_cadastro_orgao,numero:o.numero_cadastro_orgao,ano:parseInt(o.ano_cadastro_orgao),cnpj_ug:getUnmask(o.cnpj_ug_cadastro_orgao),perfil:o.perfil_cadastro_orgao};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.id_contratacao_cadastro_orgao||""==o.numero_cadastro_orgao||""==o.ano_cadastro_orgao||""==o.cnpj_ug_cadastro_orgao||""==o.perfil_cadastro_orgao?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_cadastro_orgao+"_cadastro_orgao.json"),isValid=!1),setTimeout(()=>{$("#form-cadastro-orgao")[0].reset()},1500)),console.log(n,isValid)},cadLicitanteSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={id_contratacao:o.id_contratacao_cadastro_licitante,estrageiro:o.estrageiro_cadastro_licitante,cpf_cnpj:o.cpf_cnpj_cadastro_licitante,numero:o.numero_cadastro_licitante,ano:parseInt(o.ano_cadastro_licitante)};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.id_contratacao_cadastro_licitante||""==o.estrageiro_cadastro_licitante||""==o.cpf_cnpj_cadastro_licitante||""==o.numero_cadastro_licitante||""==o.ano_cadastro_licitante?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_cadastro_licitante+"_cadastro_licitante.json"),isValid=!1),setTimeout(()=>{$("#form-cadastro-licitante")[0].reset()},1500)),console.log(n,isValid)},contratoSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={cnpj_ug:getUnmask(o.cnpj_ug_contrato),numero_processo:o.numero_processo_contrato,ano_processo:parseInt(o.ano_processo_contrato),numero_contrato:parseInt(o.numero_contrato),ano_contrato:parseInt(o.ano_contrato),id_contratacao:o.id_contratacao_contrato,id_contrato:o.id_contrato,cpf_cnpj:o.cpf_cnpj_contrato,objeto:o.objeto_contrato,tipo:o.tipo_contrato,data_assinatura:o.data_assinatura_contrato,data_inicio:o.data_inicio_contrato,data_fim:o.data_fim_contrato,valor:getCurrencyConvert(o.valor_contrato)};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.cnpj_ug_contrato||""==o.numero_processo_contrato||""==o.ano_processo_contrato||""==o.numero_contrato||""==o.ano_contrato||""==o.id_contratacao_contrato||""==o.id_contrato||""==o.cpf_cnpj_contrato||""==o.objeto_contrato||""==o.tipo_contrato||""==o.data_assinatura_contrato||""==o.data_inicio_contrato||""==o.data_fim_contrato||""==o.valor_contrato?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contrato+"_contrato.json"),isValid=!1),setTimeout(()=>{$("#form-contrato")[0].reset()},1500)),console.log(n,isValid)},sancaoSubmit=t=>{t.preventDefault();const a=new FormData(t.target),o=Object.fromEntries(a.entries()),e={id_contratacao:o.id_contratacao_sancao,id_contrato:o.id_contrato_sancao,cpf_cnpj:o.cpf_cnpj_sancao,tipo:parseInt(o.tipo_sancao),data_notificacao:o.data_notificacao_sancao,data_inicio:o.data_inicio_sancao,data_fim:o.data_fim_sancao,amplitude:o.amplitude_sancao};let r=JSON.stringify(e),n=r.split('""').join("null");n=n.split("NaN").join("null");let i=new Blob([n],{type:"text/plain;charset=utf-8"});""==o.id_contratacao_sancao||""==o.cpf_cnpj_sancao||""==o.tipo_sancao||""==o.data_notificacao_sancao||""==o.amplitude_sancao?(isValid=!1,toastError(elementValue)):(isValid=!0,1==isValid&&(toastSuccess(elementValue),saveAs(i,o.id_contratacao_sancao+"_sancao.json"),isValid=!1),setTimeout(()=>{$("#form-sancao")[0].reset()},1500)),console.log(n,isValid)};$("#btn_gera_json_procedimento").click(function(){elementValue=getValueElement("#v-pills-procedimento-tab"),1==isValid&&$("#form-procedimento").submit(procedimentoSubmit)}),$("#btn_gera_json_resultado").click(function(){elementValue=getValueElement("#v-pills-resultado-tab"),1==isValid&&$("#form-resultado").submit(resultadoSubmit)}),$("#btn_gera_json_ata_registro").click(function(){elementValue=getValueElement("#v-pills-ata-registro-tab"),1==isValid&&$("#form-ata-registro").submit(ataRegistroSubmit)}),$("#btn_gera_json_cadastro_orgao").click(function(){elementValue=getValueElement("#v-pills-cadastro-orgao-tab"),1==isValid&&$("#form-cadastro-orgao").submit(cadOrgaoSubmit)}),$("#btn_gera_json_cadastro_licitante").click(function(){elementValue=getValueElement("#v-pills-cadastro-licitante-tab"),1==isValid&&$("#form-cadastro-licitante").submit(cadLicitanteSubmit)}),$("#btn_gera_json_contrato").click(function(){elementValue=getValueElement("#v-pills-contrato-tab"),1==isValid&&$("#form-contrato").submit(contratoSubmit)}),$("#btn_gera_json_sancao").click(function(){elementValue=getValueElement("#v-pills-sancao-tab"),1==isValid&&$("#form-sancao").submit(sancaoSubmit)}),$("body").ready(function(){$("#date-year").text(getDateYear())}),$(document).ready(function(){$("#ano_processo_procedimento, #ano_procedimento, #ano_lei_procedimento, #ano_ata_registro,#ano_cadastro_orgao, #ano_cadastro_licitante, #ano_processo_contrato, #ano_contrato").datepicker({format:"yyyy",viewMode:"years",minViewMode:"years",autoclose:!0})}),$("#cnpj_ug_procedimento, #cnpj_ug_resultado, #cnpj_ug_ata_registro, #cnpj_ug_cadastro_orgao, #cnpj_ug_contrato").blur(function(){validarCNPJ($(this).val())});